<% layout("layouts/baseTemplate.ejs") %>

<div class="container mt-5">
    <a href="/jobs/list" class="text-decoration-none text-primary">
        <i class="fa-solid fa-arrow-left"></i> Back to search
    </a>

    <h2 class="mb-3 text-primary mt-4"><%= job.title %> - <%= job.jobType %></h2>

    <div class="card shadow-sm p-4 mt-3">
        
        <div class="border p-3 rounded ">
            <h2 class=""><%= job.title %></h2>
            <div class="d-flex align-items-center mb-2">
                <h5 class="fw-bold  text-muted mb-0"><%= job.company %></h5>
            </div>
            <p class="text-muted mb-2 mt-4 fs-5 mb-5">
                <i class="fa-solid fa-location-dot"></i> <%= job.location %>
            </p>
    
         <div class="row mb-4">
            <p class="text-muted mb-2 col-4">
                <i class="fa-solid fa-indian-rupee-sign"></i> 
                <%= job.salary ? job.salary + " /month" : "Not specified" %> 
                <i class="fa-solid fa-circle-info text-muted px-2" title="This is an estimated salary"></i>
            </p>
            <p class="text-muted mb-2 col-4">
                <i class="fa-regular fa-clock"></i> 
                <%= job.deadline ? job.deadline.toDateString() : "No deadline" %>
            </p>
         </div>
            <p class="badge rounded-pill bg-light text-dark col-3 fs-6 text-muted py-2">
                <i class="fa-solid fa-briefcase"></i> <%= job.jobType %>
            </p>
            <p class="mt-3 text-muted">
                <i class="fa-solid fa-user-group fs-5"></i> <%= job.applications.length %> applicants
            </p>
        </div>
    </div>
    
        <br>
        <hr>
        <br>
        <p><strong>Job Category</strong> <br><%= job.category %></p>
        <p><strong>Description</strong> <br><%= job.description %></p>
        <p><strong>Who can apply</strong><br> <%= job.requirements %></p>
        <p><strong>Responsibilities</strong> <br><%= job.responsibilities ? job.responsibilities : "Not specified" %></p>
        
        
        <div class="hired-container">
            <i class="fa-solid fa-user-check"></i> 
            <span><%=hired%> candidates hired</span>
        </div>
        <div class="mt-3">
            <% if (user.role === "JobSeeker") { %>
                <a href="/apply/<%= job._id %>" class="btn btn-primary">Apply Now</a>
            <% } %>

            <% if (user.role === "Employer") { %>
                <a href="/jobs/edit/<%= job._id %>" class="btn btn-warning">Edit Job</a>
            <% } %>

           
            
          
            
    </div>
</div>
